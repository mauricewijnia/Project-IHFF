@using Project_IHFF.Models;
@using System.Collections.Generic;

@model IEnumerable<RestaurantViewModel>
<div class="col-md-12">
    <div class="contentBox notification whiteText">
        The cost for making a reservation is €10,- which will be deducted from the bill
    </div>
</div>
<div class="col-md-12">

    @foreach (RestaurantViewModel restaurant in Model)
    {
        <div class="contentBox">

            <div class="col-md-4 noPadd">
                <img src="@restaurant.Image" style="height:13em" />
            </div>
            <div class="col-md-8 noPadd whiteText">
                <div class="col-md-6">
                    <h1 class="title">@restaurant.Name</h1>
                    <h4 class="subTitle">@restaurant.Location</h4>
                    <p class="description">@restaurant.Description</p>
                </div>
                <div class="col-md-6">
                    <p class="times">Opening Times:<span class="OrangeText"> @restaurant.TimeOpen.ToString(@"hh\:mm") - @restaurant.TimeClosed.ToString(@"hh\:mm")</span></p>
                    <p>
                        <span class="glyphicon glyphicon-calendar"></span>
                        <select>
                            <option value="-">-</option>
                            <option value="monday">Monday</option>
                            <option value="tuesday">Tuesday</option>
                            <option value="wednesday">Wednesday</option>
                            <option value="thursday">Thursday</option>
                            <option value="friday">Friday</option>
                            <option value="saturday">Saturday</option>
                            <option value="sunday">Sunday</option>
                        </select>

                        <span class="glyphicon glyphicon-time"></span>
                        <select>
                            <option value="-">-</option>
                            @{
                                TimeSpan time = @restaurant.TimeOpen;
                                TimeSpan finalTime = @restaurant.TimeClosed.Subtract(TimeSpan.FromHours(1.5)); //last reservation 1.5hour before closing time
                                TimeSpan interval = TimeSpan.FromMinutes(30);
                            }
                            @while (time <= finalTime)
                            {

                                <option value="@time.ToString(@"hh\:mm")">@time.ToString(@"hh\:mm")</option>
                                time = time.Add(interval);
                            }
                            
                        </select>

                    </p>

                    <span id="@("add"+restaurant.ItemId)" class="glyphicon glyphicon-plus-sign qtyBtn"></span>
                    <span id="@("qty"+restaurant.ItemId)">1</span>
                    <span id="@("min"+restaurant.ItemId)" class="glyphicon glyphicon-minus-sign qtyBtn"></span>
                    <a class="btn btn-default shopBtnRestaurant" href='@Url.Action("Add", "ShoppingCart", new { id = @restaurant.ItemId, Quantity = 3, shopcart = false, remove = false }, null)'>To Programme</a>
                    <a class="btn btn-default shopBtnRestaurant" href='@Url.Action("Add", "ShoppingCart", new { id = @restaurant.ItemId, Quantity = 3, shopcart = true, remove = false }, null)'>To shopping Cart</a>
                    <p>* €10.00 Reservation deposit.</p>
                </div>
            </div>
            <div class="clearfix"></div>
        </div>
    }
</div>

<script type="text/javascript">
$(document).ready(function()
{

    $(".qtyBtn").click(function ()
    {

        var id = $(this).attr('id');
        var idNr = id.slice(3);

        var qty = parseInt($("#qty" + idNr).html());

        if (id.substring(0, 3) == "add") {
            $("#qty" + idNr).html(qty + 1);
        } else if (id.substring(0, 3) == "min" && qty != "1") {
            $("#qty" + idNr).html(qty - 1);
        }

    });
});
</script>



